<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <th:block th:include="~{/layout/base::head ('Title')}"></th:block>
</head>

<body>
  <!-- header -->
  <header th:replace="~{/layout/base::header}"></header>

  <!-- main -->
  <main>
    <div class="container-fluid">
      <div th:each="ro : ${trans}" class="container-fluid mb-2 bg-primary">
        <h3>[[${ro.id}]]
          <a th:href="@{/admin/manage/guests/{gid}(gid=${ro.acc.id})}" class="btn btn-primary">Check Guest</a>
        </h3>
        <div>[[${ro.dateRange}]]</div>
        <div class="row">
          <div class="col-md-6">
            [[${ro.acc.name}]]
          </div>
          <div class="col-md-6">
            [[${ro.hotel.name}]]
          </div>
        </div>
        <i class="text-secondary">checked</i>
        <button th:id="${ro.id}" type="button" class="btn btn-primary checked-btn">mark checked</button>
      </div>
    </div>
  </main>

  <!-- footer -->
  <footer th:replace="~{/layout/base::footer}"></footer>
  <script>
    $(document).ready(function () {
      $('i.text-secondary').hide();

      $('.checked-btn').click(function () {
        var roid = $(this).attr("id");
        var url = "/admin/manage/guests/bad-transactions/" + roid + "/checked";
        var thisE = $(this);
        var prevE = $(this).prev();
        $.get(url, {},
          function (data, textStatus, jqXHR) {
            if(textStatus == "success") {
              thisE.hide();
              prevE.show();
            }
          },
          "text"
        );
      })
    });
  </script>
</body>

</html>